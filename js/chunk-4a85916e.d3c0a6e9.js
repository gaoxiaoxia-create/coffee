(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a85916e"],{1276:function(t,i,e){"use strict";var a=e("d784"),n=e("44e7"),s=e("825a"),o=e("1d80"),l=e("4840"),r=e("8aa5"),c=e("50c4"),u=e("14c3"),d=e("9263"),h=e("d039"),g=[].push,p=Math.min,f=4294967295,v=!h((function(){return!RegExp(f,"y")}));a("split",2,(function(t,i,e){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var a=String(o(this)),s=void 0===e?f:e>>>0;if(0===s)return[];if(void 0===t)return[a];if(!n(t))return i.call(a,t,s);var l,r,c,u=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,v=new RegExp(t.source,h+"g");while(l=d.call(v,a)){if(r=v.lastIndex,r>p&&(u.push(a.slice(p,l.index)),l.length>1&&l.index<a.length&&g.apply(u,l.slice(1)),c=l[0].length,p=r,u.length>=s))break;v.lastIndex===l.index&&v.lastIndex++}return p===a.length?!c&&v.test("")||u.push(""):u.push(a.slice(p)),u.length>s?u.slice(0,s):u}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,e){var n=o(this),s=void 0==i?void 0:i[t];return void 0!==s?s.call(i,n,e):a.call(String(n),i,e)},function(t,n){var o=e(a,t,this,n,a!==i);if(o.done)return o.value;var d=s(t),h=String(this),g=l(d,RegExp),m=d.unicode,k=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(v?"y":"g"),b=new g(v?d:"^(?:"+d.source+")",k),C=void 0===n?f:n>>>0;if(0===C)return[];if(0===h.length)return null===u(b,h)?[h]:[];var x=0,$=0,y=[];while($<h.length){b.lastIndex=v?$:0;var w,S=u(b,v?h:h.slice($));if(null===S||(w=p(c(b.lastIndex+(v?0:$)),h.length))===x)$=r(h,$,m);else{if(y.push(h.slice(x,$)),y.length===C)return y;for(var _=1;_<=S.length-1;_++)if(y.push(S[_]),y.length===C)return y;$=x=w}}return y.push(h.slice(x)),y}]}),!v)},"4c1b":function(t,i,e){},a15b:function(t,i,e){"use strict";var a=e("23e7"),n=e("44ad"),s=e("fc6a"),o=e("a640"),l=[].join,r=n!=Object,c=o("join",",");a({target:"Array",proto:!0,forced:r||!c},{join:function(t){return l.call(s(this),void 0===t?",":t)}})},ab7f:function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"about"},[e("van-popup",{attrs:{round:""},model:{value:t.show,callback:function(i){t.show=i},expression:"show"}},[e("div",{staticClass:"top clearfix"},[e("div",{staticClass:"img fl"},[e("img",{staticClass:"auto-img",attrs:{src:t.detailData.small_img,alt:""}})]),e("div",{staticClass:"info fl"},[e("div",{staticClass:"name"},[t._v(t._s(t.detailData.name))]),e("div",{staticClass:"rules"},[e("div",{staticClass:"enname"},[t._v(t._s(t.detailData.enname))]),e("div",{staticClass:"like"},[e("van-goods-action-icon",{attrs:{icon:"like",color:t.isCollection?"#994a1b":"#999999"},on:{click:t.toggleCollection}})],1)])])]),e("div",{staticClass:"content"},t._l(t.detailData.rules,(function(i,a){return e("div",{key:a,staticClass:"item"},[t._v(" "+t._s(i.title)+"： "),e("div",{staticClass:"rule_item"},t._l(i.rule,(function(a,n){return e("div",{key:n,staticClass:"goods",class:i.ruleIndex==n?"active":"",on:{click:function(e){return t.toggleState(i,n)}}},[t._v(t._s(a.title))])})),0)])})),0),e("div",{staticClass:"btn"},[e("van-goods-action",[e("van-goods-action-button",{attrs:{type:"warning",text:"加入购物袋",color:"#994a1b"},on:{click:t.addProduct}}),e("van-goods-action-button",{attrs:{type:"danger",text:"立即购买",color:"#780d00"},on:{click:function(i){return t.gobuy(!0)}}})],1)],1),e("div",{staticClass:"price"},[t._v("￥"+t._s(t.detailData.price))])])],1)},n=[],s=(e("a15b"),e("d81d"),e("ac1f"),e("1276"),e("4c1b"),{name:"DetailAbout",data:function(){return{pid:"",detailData:{},ruleIndex:0,isCollection:!1,product:{count:1},bagCount:0,show:!0,starRule:[]}},created:function(){this.pid=this.$route.params.pid,this.getDetailData(),this.colletion()},methods:{getDetailData:function(){var t=this;this.axios({method:"GET",url:"/productDetail",params:{appkey:this.appkey,pid:this.pid}}).then((function(i){console.log(i);var e=i.data.result[0];e.desc=e.desc.split(/\n/);var a=["cream","milk","sugar","tem"],n=[];a.map((function(t){var i={};i.title=e[t+"_desc"],i.ruleIndex=0,i.rule=[];var a=e[t].split("/");a.map((function(t){""!=t&&i.rule.push({title:t})})),i.rule.length>0&&n.push(i)})),e.rules=n,t.detailData=e})).catch((function(t){console.log(t)}))},toggleState:function(t,i){t.ruleIndex!=i&&(t.ruleIndex=i)},colletion:function(){var t=this,i=localStorage.getItem("tokenString");i?(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/findlike",params:{appkey:this.appkey,pid:this.pid,tokenString:i}}).then((function(i){t.$toast.clear(),1e3==i.data.code&&i.data.result.length>0&&(t.isCollection=!0),t.$toast(i.data.msg)}))):this.$toast("您未登录账号")},toggleCollection:function(){var t=this,i=localStorage.getItem("tokenString");if(!i)return this.$toast("请先登录"),this.$router.push({name:"Login"});var e=this.isCollection?"/notlike":"/like";console.log(i),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:e,data:{appkey:this.appkey,pid:this.pid,tokenString:i}}).then((function(i){t.$toast.clear(),700==i.data.code?(t.$toast("请先登录!"),t.$router.push({name:"Login"})):800==i.data.code?t.isCollection=!0:900==i.data.code&&(t.isCollection=!1),t.$toast(i.data.msg)}))},addProduct:function(){var t=this,i=localStorage.getItem("tokenString");if(!i)return this.$toast("请先登录"),this.$router.push({name:"Login"});var e={tokenString:i,appkey:this.appkey,count:this.product.count,pid:this.pid},a=[];this.detailData.rules.map((function(t){a.push(t.rule[t.ruleIndex].title)})),e.rule=a.join("/"),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/addShopcart",data:e}).then((function(i){t.$toast.clear(),700==i.data.code?(t.$toast("请先登录!"),t.$router.push({name:"Login"})):3e3==i.data.code&&1==i.data.status&&t.bagCount++,t.$toast(i.data.msg),t.show=!1})).catch((function(i){t.$toast.clear()}))},gobuy:function(t){this.addProduct(t),this.show=!1}}}),o=s,l=e("2877"),r=Object(l["a"])(o,a,n,!1,null,"76ae33cc",null);i["default"]=r.exports}}]);
//# sourceMappingURL=chunk-4a85916e.d3c0a6e9.js.map