(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b990301"],{1276:function(t,i,a){"use strict";var e=a("d784"),n=a("44e7"),o=a("825a"),s=a("1d80"),l=a("4840"),r=a("8aa5"),c=a("50c4"),u=a("14c3"),d=a("9263"),h=a("d039"),g=[].push,p=Math.min,f=4294967295,v=!h((function(){return!RegExp(f,"y")}));e("split",2,(function(t,i,a){var e;return e="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var e=String(s(this)),o=void 0===a?f:a>>>0;if(0===o)return[];if(void 0===t)return[e];if(!n(t))return i.call(e,t,o);var l,r,c,u=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,v=new RegExp(t.source,h+"g");while(l=d.call(v,e)){if(r=v.lastIndex,r>p&&(u.push(e.slice(p,l.index)),l.length>1&&l.index<e.length&&g.apply(u,l.slice(1)),c=l[0].length,p=r,u.length>=o))break;v.lastIndex===l.index&&v.lastIndex++}return p===e.length?!c&&v.test("")||u.push(""):u.push(e.slice(p)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:i.call(this,t,a)}:i,[function(i,a){var n=s(this),o=void 0==i?void 0:i[t];return void 0!==o?o.call(i,n,a):e.call(String(n),i,a)},function(t,n){var s=a(e,t,this,n,e!==i);if(s.done)return s.value;var d=o(t),h=String(this),g=l(d,RegExp),m=d.unicode,k=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(v?"y":"g"),C=new g(v?d:"^(?:"+d.source+")",k),b=void 0===n?f:n>>>0;if(0===b)return[];if(0===h.length)return null===u(C,h)?[h]:[];var x=0,$=0,y=[];while($<h.length){C.lastIndex=v?$:0;var S,_=u(C,v?h:h.slice($));if(null===_||(S=p(c(C.lastIndex+(v?0:$)),h.length))===x)$=r(h,$,m);else{if(y.push(h.slice(x,$)),y.length===b)return y;for(var I=1;I<=_.length-1;I++)if(y.push(_[I]),y.length===b)return y;$=x=S}}return y.push(h.slice(x)),y}]}),!v)},4131:function(t,i,a){},a15b:function(t,i,a){"use strict";var e=a("23e7"),n=a("44ad"),o=a("fc6a"),s=a("a640"),l=[].join,r=n!=Object,c=s("join",",");e({target:"Array",proto:!0,forced:r||!c},{join:function(t){return l.call(o(this),void 0===t?",":t)}})},c84b:function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"detail"},[a("div",{staticClass:"nav"},[a("van-nav-bar",{attrs:{title:"商品详情","left-text":"返回","left-arrow":"",fixed:""},on:{"click-left":t.goback}})],1),a("div",{staticClass:"content"},[a("div",{staticClass:"top"},[a("img",{staticClass:"auto-img",attrs:{src:t.detailData.large_img,alt:""}}),a("div",{staticClass:"name"},[t._v(t._s(this.detailData.name))])]),a("div",{staticClass:"bottom"},[a("div",t._l(t.detailData.rules,(function(i,e){return a("div",{key:e,staticClass:"info"},[t._v(" "+t._s(i.title)+"： "),a("div",{staticClass:"rule"},t._l(i.rule,(function(e,n){return a("div",{key:n,staticClass:"goods",class:i.ruleIndex==n?"active":"",on:{click:function(a){return t.toggleState(i,n)}}},[t._v(" "+t._s(e.title)+" ")])})),0)])})),0),a("div",{staticClass:"icon"},[a("div",{staticClass:"scrip"},[t._v("商品描述")]),a("div",{staticClass:"produ_scrip"},t._l(t.detailData.desc,(function(i,e){return a("div",{key:e,staticClass:"text"},[t._v(" "+t._s(e+1)+"、"+t._s(i)+" ")])})),0)])])]),a("div",[a("van-goods-action",[a("van-goods-action-icon",{attrs:{icon:"cart-o",text:"购物袋",color:t.bagCount>0?"#994a1b":"#dddddd",badge:0==t.bagCount?"":t.bagCount,to:{name:"Shopbag"}}}),a("van-goods-action-icon",{attrs:{icon:"like",text:t.isCollection?"已收藏":"收藏",color:t.isCollection?"#994a1b":"#666666"},on:{click:t.toggleCollection}}),a("van-goods-action-button",{attrs:{color:"#a17860",type:"warning",text:"加入购物袋"},on:{click:t.addProduct}}),a("van-goods-action-button",{attrs:{color:"#994a1b",type:"danger",text:"立即购买"},on:{click:function(i){return t.gobuy(!0)}}})],1),a("div",{staticClass:"price"},[t._v("￥"+t._s(this.detailData.price))])],1)])},n=[],o=(a("a15b"),a("d81d"),a("ac1f"),a("1276"),a("4131"),{name:"Detail",data:function(){return{pid:"",detailData:{},ruleIndex:0,isCollection:!1,product:{count:1},bagCount:0}},created:function(){this.pid=this.$route.params.pid,this.getDetailData(),this.colletion(),this.shopBagCount()},methods:{goback:function(){this.$router.go(-1)},getDetailData:function(){var t=this;this.axios({method:"GET",url:"/productDetail",params:{appkey:this.appkey,pid:this.pid}}).then((function(i){var a=i.data.result[0];a.desc=a.desc.split(/\n/);var e=["cream","milk","sugar","tem"],n=[];e.map((function(t){var i={};i.title=a[t+"_desc"],i.ruleIndex=0,i.rule=[];var e=a[t].split("/");e.map((function(t){""!=t&&i.rule.push({title:t})})),i.rule.length>0&&n.push(i)})),a.rules=n,t.detailData=a,console.log(i)})).catch((function(t){console.log(t)}))},toggleState:function(t,i){t.ruleIndex!=i&&(t.ruleIndex=i)},toggleCollection:function(){var t=this,i=localStorage.getItem("tokenString");if(!i)return this.$toast("请先登录"),this.$router.push({name:"Login"});var a=this.isCollection?"/notlike":"/like";console.log(i),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:a,data:{appkey:this.appkey,pid:this.pid,tokenString:i}}).then((function(i){t.$toast.clear(),700==i.data.code?(t.$toast("请先登录!"),t.$router.push({name:"Login"})):800==i.data.code?t.isCollection=!0:900==i.data.code&&(t.isCollection=!1),t.$toast(i.data.msg)}))},colletion:function(){var t=this,i=localStorage.getItem("tokenString");i?(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/findlike",params:{appkey:this.appkey,pid:this.pid,tokenString:i}}).then((function(i){t.$toast.clear(),1e3==i.data.code&&i.data.result.length>0&&(t.isCollection=!0),t.$toast(i.data.msg)}))):this.$toast("您未登录账号")},addProduct:function(){var t=this,i=localStorage.getItem("tokenString");if(!i)return this.$toast("请先登录"),this.$router.push({name:"Login"});var a={tokenString:i,appkey:this.appkey,count:this.product.count,pid:this.pid},e=[];this.detailData.rules.map((function(t){e.push(t.rule[t.ruleIndex].title)})),a.rule=e.join("/"),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/addShopcart",data:a}).then((function(i){t.$toast.clear(),700==i.data.code?(t.$toast("请先登录!"),t.$router.push({name:"Login"})):3e3==i.data.code&&1==i.data.status&&t.bagCount++,t.$toast(i.data.msg)})).catch((function(i){t.$toast.clear()}))},shopBagCount:function(){var t=this,i=localStorage.getItem("tokenString");i&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/shopcartRows",params:{appkey:this.appkey,tokenString:i}}).then((function(i){t.$toast.clear(),8e3==i.data.code&&(t.bagCount=i.data.result)})).catch((function(i){t.$toast.clear(),console.log("err ==> ",i)})))},gobuy:function(t){this.addProduct(t)}}}),s=o,l=a("2877"),r=Object(l["a"])(s,e,n,!1,null,null,null);i["default"]=r.exports}}]);
//# sourceMappingURL=chunk-5b990301.6efd7da1.js.map