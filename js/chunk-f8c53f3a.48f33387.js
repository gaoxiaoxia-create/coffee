(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f8c53f3a"],{"305b":function(o,t,e){"use strict";e.r(t);var s=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{staticClass:"secure"},[e("van-nav-bar",{attrs:{title:"安全中心","left-text":"返回","left-arrow":"",fixed:""},on:{"click-left":o.goback}}),e("BgBox",[e("div",{staticClass:"cell-box"},[e("van-cell",{attrs:{title:"修改密码","is-link":"",center:!0},on:{click:o.openPasswordBox}}),e("van-cell",{attrs:{title:"注销账号","is-link":"",center:!0},on:{click:o.destroyAccount}})],1)]),e("div",{staticClass:"logout-box"},[e("van-button",{attrs:{color:"#780d00",block:"",round:""},on:{click:o.logout}},[o._v("退出登录")])],1),e("van-popup",{attrs:{"is-link":"",position:"bottom",closeable:""},model:{value:o.isOpen,callback:function(t){o.isOpen=t},expression:"isOpen"}},[e("div",{staticClass:"form-box"},[e("div",{staticClass:"form-title"},[o._v("修改密码")]),e("van-form",[e("van-field",{attrs:{type:o.isPassword?"password":"text",name:"旧密码",label:"旧密码",placeholder:"旧密码(首字符必须为字母)","right-icon":o.isPassword?"closed-eye":"eye-o",autocomplete:"off"},on:{"click-right-icon":o.toggleType},model:{value:o.password.oldPassword,callback:function(t){o.$set(o.password,"oldPassword",t)},expression:"password.oldPassword"}}),e("van-field",{attrs:{type:o.isPassword?"password":"text",name:"新密码",label:"新密码",placeholder:"新密码(首字符必须为字母)","right-icon":o.isPassword?"closed-eye":"eye-o",autocomplete:"off"},on:{"click-right-icon":o.toggleType},model:{value:o.password.newPassword,callback:function(t){o.$set(o.password,"newPassword",t)},expression:"password.newPassword"}}),e("div",{staticClass:"commit-btn"},[e("van-button",{attrs:{round:"",block:"",color:"#0C34BA"},on:{click:o.commit}},[o._v("提交")])],1)],1)],1)])],1)},a=[],n=(e("d42c"),e("928f")),r=e("e3a8"),i={name:"Secure",components:{BgBox:n["a"]},data:function(){return{isOpen:!1,isPassword:!0,password:{oldPassword:"",newPassword:""}}},methods:{goback:function(){this.$router.go(-1)},toggleType:function(){this.isPassword=!this.isPassword},openPasswordBox:function(){this.isOpen=!0},destroyAccount:function(){var o=this;this.$dialog.confirm({title:"注销账号",message:"是否确定注销账号，一旦注销无法恢复！",confirmButtonColor:"#0C34BA"}).then((function(){console.log("aaaa");var t=localStorage.getItem("tokenString");if(!t)return o.$toast("请先登录"),o.$router.push({name:"Login"});o.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),o.axios({method:"POST",url:"/destroyAccount",data:{appkey:o.appkey,tokenString:t}}).then((function(t){o.$toast.clear(),700==t.data.code?o.$router.push({name:"Login"}):"G001"==t.data.code&&setTimeout((function(){localStorage.removeItem("tokenString"),o.$router.push({name:"Login"})}),800),o.$toast(t.data.msg)})).catch((function(t){o.$toast.clear(),console.log("err ==> ",t)}))})).catch((function(o){console.log("err ==> ",o)}))},logout:function(){var o=this;this.$dialog.confirm({title:"退出登录",message:"是否确定退出登录！",confirmButtonColor:"#0C34BA"}).then((function(){o.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),setTimeout((function(){o.$toast.clear(),localStorage.removeItem("tokenString"),o.$router.push({name:"Login"})}),800)})).catch((function(o){console.log("err ==> ",o)}))},commit:function(){var o=this,t={oldPassword:{value:this.password.oldPassword,errorMsg:"旧密码由数字字母下划线组合(6-16字符)",reg:/^[A-Za-z]\w{5,15}$/},newPassword:{value:this.password.newPassword,errorMsg:"新密码由数字字母下划线组合(6-16字符)",reg:/^[A-Za-z]\w{5,15}$/}},e=r["a"].valid(t);if(e){if(this.password.newPassword==this.password.oldPassword)return void this.$toast("新密码和旧密码不能相同");var s=localStorage.getItem("tokenString");if(!s)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/updatePassword",data:{appkey:this.appkey,tokenString:s,password:this.password.newPassword,oldPassword:this.password.oldPassword}}).then((function(t){o.$toast.clear(),700==t.data.code?o.$router.push({name:"Login"}):"E001"==t.data.code&&setTimeout((function(){localStorage.removeItem("tokenString"),o.$router.push({name:"Login"})}),800),o.$toast(t.data.msg)})).catch((function(t){o.$toast.clear(),console.log("err ==> ",t)}))}}}},c=i,l=e("2877"),d=Object(l["a"])(c,s,a,!1,null,"139c8b90",null);t["default"]=d.exports},"7c93":function(o,t,e){"use strict";e("d39a")},"928f":function(o,t,e){"use strict";var s=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{staticClass:"bg_box"},[e("div",{staticClass:"bg"},[e("div",{staticClass:"content"},[o._t("default")],2)])])},a=[],n={name:"BgBox"},r=n,i=(e("7c93"),e("2877")),c=Object(i["a"])(r,s,a,!1,null,"0af07a33",null);t["a"]=c.exports},d39a:function(o,t,e){},d42c:function(o,t,e){},e3a8:function(o,t,e){"use strict";function s(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function a(o,t){for(var e=0;e<t.length;e++){var s=t[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(o,s.key,s)}}function n(o,t,e){return t&&a(o.prototype,t),e&&a(o,e),o}e.d(t,"a",(function(){return l}));e("e7e5");var r=e("d399"),i=e("2b0e");i["a"].use(r["a"]);var c=function(){function o(){s(this,o)}return n(o,[{key:"valid",value:function(o){for(var t in o)if(!o[t].reg.test(o[t].value))return console.log(o[t].errorMsg),Object(r["a"])(o[t].errorMsg),!1;return!0}}]),o}(),l=new c}}]);
//# sourceMappingURL=chunk-f8c53f3a.48f33387.js.map